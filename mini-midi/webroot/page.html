<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>MIDI Silly Fantasy</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Reddit header -->
    <div class="reddit-header">
        <div class="header-title">üéµ MIDI Silly Fantasy</div>
        <div class="header-buttons">
            <button id="shareBtn" class="btn">Share</button>
            <button id="importBtn" class="btn">Import</button>
        </div>
    </div>

    <!-- Recording controls -->
    <div class="recording-controls">
        <button id="recordBtn" class="btn btn-record">‚óè Record</button>
        <button id="playBtn" class="btn btn-play">‚ñ∂ Play</button>
        <span id="recordingTime" class="recording-time">00:00</span>
    </div>

    <!-- Main content -->
    <div class="main-container" id="mainContainer">
        <!-- Start message -->
        <div id="startMessage" class="start-message">
            <h1>üéÆ MIDI Silly Fantasy</h1>
            <p>Play and share music!</p>
            <p>Left controller plays notes, right controller plays chords.</p>
            <p style="font-size: 14px; color: rgba(255, 255, 255, 0.7); margin-top: 10px;">
                üéÆ Gamepad: Use analog sticks<br>
                ‚å®Ô∏è Keyboard: WASD for notes, Arrow keys for chords<br>
                üñ±Ô∏è Mouse/Touch: Click or drag the circles
            </p>
            
            <button id="startBtn" class="btn-start">Start Playing!</button>
        </div>

        <!-- Musical interface -->
        <div id="playerInterface" class="player-interface">

            <!-- Controls -->
            <div class="interface-controls">
                <div class="scale-controls">
                    <button id="scalePrev" class="btn btn-scale">
                        <span class="scale-icon-default">‚óÄ</span>
                        <span class="scale-icon-gamepad" style="display: none;">LB</span>
                    </button>
                    <span id="scaleDisplay" class="scale-display">Major ‚ú®</span>
                    <button id="scaleNext" class="btn btn-scale">
                        <span class="scale-icon-default">‚ñ∂</span>
                        <span class="scale-icon-gamepad" style="display: none;">RB</span>
                    </button>
                </div>

                <div class="octave-controls">
                    <button id="octaveDown" class="btn btn-octave">
                        <span class="octave-icon-default">‚ñº</span>
                        <span class="octave-icon-gamepad" style="display: none;">‚ìç</span>
                    </button>
                    <span id="octaveDisplay" class="octave-display">Oct: 4</span>
                    <button id="octaveUp" class="btn btn-octave">
                        <span class="octave-icon-default">‚ñ≤</span>
                        <span class="octave-icon-gamepad" style="display: none;">‚í∑</span>
                    </button>
                </div>
            </div>

            <!-- Instruments -->
            <div class="instrument-container">
                <!-- Left instrument (notes) -->
                <div class="instrument-group">
                    <div class="instrument" id="leftInstrument">
                        <div class="instrument-inner" id="leftInner">‚ô™</div>
                        <!-- Pie slice note indicators -->
                        <div class="note-indicator note-0" data-note="C">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="C"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-1" data-note="D">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="D"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-2" data-note="E">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="E"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-3" data-note="F">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="F"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-4" data-note="G">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="G"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-5" data-note="A">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="A"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-6" data-note="B">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="B"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-7" data-note="C'">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="C'"></div>
                                </div>
                            </div>
                        </div>

                        <!-- External note labels -->
                        <div class="external-note-label" data-note-index="0">C</div>
                        <div class="external-note-label" data-note-index="1">D</div>
                        <div class="external-note-label" data-note-index="2">E</div>
                        <div class="external-note-label" data-note-index="3">F</div>
                        <div class="external-note-label" data-note-index="4">G</div>
                        <div class="external-note-label" data-note-index="5">A</div>
                        <div class="external-note-label" data-note-index="6">B</div>
                        <div class="external-note-label" data-note-index="7">C'</div>
                    </div>
                </div>

                <!-- Right instrument (chords) -->
                <div class="instrument-group">
                    <div class="instrument" id="rightInstrument">
                        <div class="instrument-inner" id="rightInner">‚ô´</div>
                        <!-- Pie slice note indicators -->
                        <div class="note-indicator note-0" data-note="C">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="C"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-1" data-note="D">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="D"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-2" data-note="E">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="E"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-3" data-note="F">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="F"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-4" data-note="G">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="G"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-5" data-note="A">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="A"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-6" data-note="B">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="B"></div>
                                </div>
                            </div>
                        </div>
                        <div class="note-indicator note-7" data-note="C'">
                            <div class="segment">
                                <div class="inner">
                                    <div class="note-label" data-note="C'"></div>
                                </div>
                            </div>
                        </div>

                        <!-- External chord labels (will be updated dynamically) -->
                        <div class="external-note-label" data-note-index="0">C</div>
                        <div class="external-note-label" data-note-index="1">Dm</div>
                        <div class="external-note-label" data-note-index="2">Em</div>
                        <div class="external-note-label" data-note-index="3">F</div>
                        <div class="external-note-label" data-note-index="4">G</div>
                        <div class="external-note-label" data-note-index="5">Am</div>
                        <div class="external-note-label" data-note-index="6">B¬∞</div>
                        <div class="external-note-label" data-note-index="7">C</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Share modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Share Your Composition</div>
            <div class="modal-body">
                <textarea id="shareMessage" placeholder="Add a message about your composition..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancelShare">Cancel</button>
                <button class="btn" id="confirmShare" style="background: #007bff;">Share</button>
            </div>
        </div>
    </div>

    <!-- Import modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">Import Composition</div>
            <div class="modal-body">
                <p style="margin-bottom: 10px; color: #bdc3c7; font-size: 14px;">
                    Paste a composition code from a shared comment:
                </p>
                <textarea id="importData" placeholder="Paste composition code here..."
                    style="font-family: 'Courier New', monospace;"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn" id="cancelImport">Cancel</button>
                <button class="btn" id="confirmImport" style="background: #28a745;">Import</button>
            </div>
        </div>
    </div>

    <!-- Toast container -->
    <div id="toastContainer"></div>

    <!-- Load modules -->
    <script type="module" src="script.js"></script>
</body>

</html>